# name: Daily Commit

# on:
#   schedule:
#     - cron: "0 0 * * *"   # runs daily at midnight UTC
#   workflow_dispatch:      # allows manual run

# jobs:
#   build:
#     runs-on: ubuntu-latest
#     steps:
#       - name: Checkout Repo
#         uses: actions/checkout@v3

#       - name: Run Script
#         run: |
#           bash update.sh
# # 
name: Daily Commit

on:
  schedule:
    - cron: "50 9 * * *"   # runs daily at 11:15 PM IST
  workflow_dispatch:        # allows manual run

permissions:
  contents: write

jobs:
  commit:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v3

      - name: Make changes
        run: |
          for i in {1..5}
          do
            echo "Last run: $(date)" >> log.txt
            git config user.name "Meshv Patel"
            git config user.email "meshv1444@gmail.com"
            git add log.txt
            git commit -m "Automated commit: $(date) - run $i"
            git remote set-url origin https://x-access-token:${{ secrets.GITHUB_TOKEN }}@github.com/${{ github.repository }}
            git push
            sleep 2
          done
